<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENMA E-SPORTS | PIXCELYASH.SPACE</title>
    
    <!-- External Assets -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;600;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- 1. VARIABLES & RESET --- */
        :root {
            /* Palette: Void Black, Glitch Red, White */
            --bg-void: #050505;
            --bg-panel: #0a0a0a;
            
            --accent-red: #ff003c; /* Cyber Red */
            --accent-dark-red: #8a0020;
            --accent-white: #ffffff;
            --accent-gray: #333333;
            
            --font-display: 'Orbitron', sans-serif;
            --font-tech: 'Chakra Petch', sans-serif;
            
            --ease-snap: cubic-bezier(0.16, 1, 0.3, 1);
            --ease-cinematic: cubic-bezier(0.19, 1, 0.22, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: crosshair;
        }

        html { 
            scroll-behavior: smooth; 
            font-size: 16px; /* Base font size */
        }

        body {
            background-color: var(--bg-void);
            color: var(--accent-white);
            font-family: var(--font-tech);
            overflow-x: hidden;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }

        /* --- 2. DYNAMIC BACKGROUND --- */
        #bg-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: -1;
            opacity: 0.2;
        }

        .noise-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48ZmlsdGVyIGlkPSJuIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iMC41IiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PC9maWx0ZXI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsdGVyPSJ1cmwoI24pIiBvcGFjaXR5PSIwLjA1Ii8+PC9zdmc+');
            pointer-events: none;
            z-index: 0;
        }

        /* --- 3. UTILITIES & LAYOUT --- */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px; /* Base padding */
            position: relative;
            z-index: 2;
        }

        h1, h2, h3 { 
            text-transform: uppercase; 
            font-family: var(--font-display);
            line-height: 1.1;
        }

        .section-padding { padding: 100px 0; }

        /* Typography Scaling */
        h1 { font-size: clamp(2.5rem, 8vw, 6rem); }
        h2 { font-size: clamp(2rem, 5vw, 4rem); }
        h3 { font-size: clamp(1.5rem, 3vw, 2.5rem); }

        .glitch {
            position: relative;
            color: white;
        }
        .glitch::before, .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-void);
        }
        .glitch::before {
            left: 2px; text-shadow: -1px 0 red; clip: rect(24px, 550px, 90px, 0);
            animation: glitch-anim-2 3s infinite linear alternate-reverse;
        }
        .glitch::after {
            left: -2px; text-shadow: -1px 0 blue; clip: rect(85px, 550px, 140px, 0);
            animation: glitch-anim 2.5s infinite linear alternate-reverse;
        }
        @keyframes glitch-anim {
            0% { clip: rect(10px, 9999px, 30px, 0); }
            20% { clip: rect(80px, 9999px, 100px, 0); }
            40% { clip: rect(10px, 9999px, 50px, 0); }
            60% { clip: rect(40px, 9999px, 80px, 0); }
            80% { clip: rect(90px, 9999px, 95px, 0); }
            100% { clip: rect(20px, 9999px, 60px, 0); }
        }
        @keyframes glitch-anim-2 {
            0% { clip: rect(60px, 9999px, 90px, 0); }
            20% { clip: rect(10px, 9999px, 50px, 0); }
            40% { clip: rect(80px, 9999px, 100px, 0); }
            60% { clip: rect(30px, 9999px, 60px, 0); }
            80% { clip: rect(50px, 9999px, 80px, 0); }
            100% { clip: rect(10px, 9999px, 40px, 0); }
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 15px 30px;
            background: transparent;
            color: var(--accent-white);
            border: 2px solid var(--accent-white);
            font-family: var(--font-display);
            font-weight: 700;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            transition: 0.2s;
            clip-path: polygon(0 0, 100% 0, 100% 75%, 90% 100%, 0 100%);
            cursor: pointer;
            text-align: center;
            font-size: 1rem;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 0%; height: 100%;
            background: var(--accent-red);
            z-index: -1;
            transition: width 0.3s var(--ease-snap);
        }
        
        .btn:hover::before { width: 100%; }
        .btn:hover { border-color: var(--accent-red); color: #000; }

        .btn-secondary {
            border-color: var(--accent-gray);
            color: var(--accent-gray);
        }
        .btn-secondary:hover {
            border-color: var(--accent-white);
            color: var(--accent-white);
        }
        .btn-secondary::before { background: var(--accent-gray); }

        .title-wrapper {
            margin-bottom: 60px;
            border-left: 8px solid var(--accent-red);
            padding-left: 20px;
        }
        
        .title-wrapper span {
            display: block;
            color: var(--accent-red);
            font-weight: 700;
            letter-spacing: 3px;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        /* --- 4. CINEMATIC BLUR PRELOADER --- */
        #preloader {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #000;
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            overflow: hidden;
        }

        .loader-bg-glow {
            position: absolute;
            width: 60vw; height: 60vw;
            background: radial-gradient(circle, rgba(255,0,60,0.1) 0%, rgba(0,0,0,0) 70%);
            border-radius: 50%;
            animation: pulseGlow 4s infinite alternate;
            z-index: -1;
        }

        .loader-content-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 2;
            width: 90%;
            text-align: center;
        }

        .loader-logo-img {
            width: 120px;
            height: auto;
            margin-bottom: 30px;
            opacity: 0;
            transform: scale(2);
            filter: blur(20px);
            animation: cinematicFocus 2s var(--ease-cinematic) forwards;
        }

        .loader-text-cinematic {
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 4rem);
            font-weight: 900;
            color: #fff;
            letter-spacing: clamp(5px, 2vw, 15px);
            opacity: 0;
            transform: translateY(30px);
            filter: blur(10px);
            animation: textFocusUp 2s var(--ease-cinematic) 0.5s forwards;
            text-shadow: 0 0 30px rgba(255, 0, 60, 0.5);
            text-align: center;
            line-height: 1.2;
        }

        .loader-subtext {
            font-family: var(--font-tech);
            color: #888;
            letter-spacing: 5px;
            font-size: 0.9rem;
            margin-top: 20px;
            opacity: 0;
            animation: fadeSimple 1s ease-out 2.5s forwards;
        }

        .loader-scanline {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 2px;
            background: rgba(255,255,255,0.1);
            animation: scanDown 3s linear infinite;
            z-index: 3;
            pointer-events: none;
        }

        .blur-out-anim { animation: blurOut 1s forwards; }
        .fade-out-anim { animation: fadeOut 1s forwards 0.5s; }

        @keyframes cinematicFocus {
            to { opacity: 1; transform: scale(1); filter: blur(0px); }
        }
        @keyframes textFocusUp {
            to { opacity: 1; transform: translateY(0); filter: blur(0px); }
        }
        @keyframes pulseGlow {
            0% { transform: scale(0.8); opacity: 0.5; }
            100% { transform: scale(1.2); opacity: 0.8; }
        }
        @keyframes fadeSimple { to { opacity: 1; } }
        @keyframes scanDown {
            0% { top: -10%; opacity: 0; } 50% { opacity: 1; } 100% { top: 110%; opacity: 0; }
        }
        @keyframes blurOut {
            to { filter: blur(20px); opacity: 0; transform: scale(1.1); }
        }
        @keyframes fadeOut {
            to { opacity: 0; visibility: hidden; }
        }

        /* --- 5. HERO SECTION --- */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            padding: 120px 0 80px 0;
        }

        .hero-content { 
            width: 100%; 
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .hero-logo-main {
            width: 120px;
            height: auto;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 20px rgba(255, 0, 60, 0.4));
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .hero-sub {
            font-size: clamp(1rem, 2vw, 1.5rem);
            color: #888;
            max-width: 600px;
            margin-bottom: 40px;
            border-left: 2px solid var(--accent-red);
            padding-left: 20px;
        }

        .hero-actions {
            display: flex; 
            gap: 20px;
            flex-wrap: wrap;
        }

        .hero-stats {
            display: flex;
            gap: 40px;
            margin-top: 60px;
            border-top: 1px solid #333;
            padding-top: 30px;
            flex-wrap: wrap;
        }

        .stat-item h3 { font-size: 2rem; color: var(--accent-red); }
        .stat-item p { font-size: 0.8rem; color: #666; letter-spacing: 2px; }

        /* --- 6. SCHEDULE --- */
        .schedule-strip {
            background: var(--accent-red);
            color: #000;
            padding: 15px 0;
            overflow: hidden;
            white-space: nowrap;
            font-family: var(--font-display);
            font-weight: 900;
            font-size: 1.2rem;
            letter-spacing: 2px;
            position: relative;
            transform: rotate(-1deg) scale(1.02);
            z-index: 10;
            border-top: 4px solid #000;
            border-bottom: 4px solid #000;
            width: 100%;
        }

        .marquee-content {
            display: inline-block;
            animation: scroll 20s linear infinite;
        }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        /* --- 7. PRICING --- */
        .pricing-section {
            background: #080808;
            position: relative;
        }
        
        .pricing-section::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-red), transparent);
        }

        .price-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .contract-card {
            background: #030303;
            border: 1px solid #333;
            padding: 30px;
            position: relative;
            transition: 0.4s;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 90% 100%, 0 100%);
        }

        .contract-card:hover {
            border-color: var(--accent-red);
            box-shadow: -5px 5px 0 rgba(255, 0, 60, 0.2);
            transform: translate(2px, -2px);
        }

        .contract-card.featured { border: 2px solid var(--accent-red); }
        
        .contract-card.featured::after {
            content: 'LIVE'; position: absolute; top: 0; right: 0;
            background: var(--accent-red); color: #000;
            padding: 5px 10px; font-weight: 800; font-size: 0.8rem;
        }

        .contract-price {
            font-size: 3.5rem;
            font-family: var(--font-display);
            font-weight: 700;
            color: #fff;
            margin-bottom: 20px;
            line-height: 1;
        }

        .contract-details li {
            list-style: none;
            border-bottom: 1px solid #222;
            padding: 12px 0;
            display: flex; justify-content: space-between;
            color: #aaa;
            font-size: 0.9rem;
        }
        .contract-details li strong { color: #fff; }

        /* --- 8. SLOTS (TERMINAL) --- */
        .terminal-container {
            border: 2px solid #333;
            background: #020202;
            padding: 20px;
            font-family: 'Share Tech Mono', monospace; 
            overflow-x: hidden;
        }

        .terminal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #333;
            padding-bottom: 15px;
            margin-bottom: 20px;
            color: #666;
            text-transform: uppercase;
            flex-wrap: wrap;
            gap: 15px;
        }

        .lobby-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .lobby-btn {
            background: #111;
            border: 1px solid #333;
            color: #666;
            padding: 8px 15px;
            cursor: pointer;
            font-family: var(--font-display);
            transition: 0.3s;
            font-size: 0.8rem;
        }
        
        .lobby-btn:hover { color: #fff; }
        .lobby-btn.active { background: var(--accent-red); color: #000; border-color: var(--accent-red); }

        .slot-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .slot-item {
            border: 1px solid #222;
            padding: 15px;
            display: flex;
            flex-direction: column;
            transition: 0.2s;
        }

        .slot-item:hover { background: #111; border-color: #555; }
        .slot-item.filled { border-left: 3px solid var(--accent-red); }
        .slot-item.open { border-left: 3px solid #333; opacity: 0.7; }

        .slot-id { font-size: 0.8rem; color: #555; margin-bottom: 5px; }
        .slot-name { font-weight: 700; color: #fff; word-break: break-word; }
        
        /* --- 9. UPLOAD & REGISTRATION --- */
        .upload-section { background: #0a0a0a; }

        .reg-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: transparent;
            border: 2px solid #333;
            color: #666;
            padding: 15px 20px;
            font-family: var(--font-display);
            font-weight: 700;
            cursor: pointer;
            transition: 0.3s;
            flex: 1;
            min-width: 140px;
            text-transform: uppercase;
            text-align: center;
        }

        .tab-btn:hover { border-color: #666; }
        .tab-btn.active {
            background: var(--accent-red);
            color: #000;
            border-color: var(--accent-red);
        }

        .cyber-input, .cyber-select {
            width: 100%;
            background: #050505;
            border: 1px solid #333;
            color: #fff;
            padding: 15px;
            font-family: var(--font-tech);
            margin-bottom: 15px;
            transition: 0.3s;
            font-size: 1rem;
            border-radius: 0;
        }
        
        .cyber-select { cursor: pointer; text-transform: uppercase; }

        .cyber-input:focus, .cyber-select:focus {
            border-color: var(--accent-red);
            outline: none;
            box-shadow: 0 0 10px rgba(255, 0, 60, 0.2);
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .qr-section {
            background: #fff;
            padding: 10px;
            width: 180px;
            height: 180px;
            margin: 0 auto 30px auto;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 4px solid var(--accent-red);
        }

        .file-upload-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
            border-top: 1px solid #333;
            padding-top: 30px;
        }

        .upload-box {
            border: 2px dashed #444;
            padding: 30px;
            text-align: center;
            transition: 0.3s;
            cursor: pointer;
            background: #080808;
            position: relative;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .upload-box:hover {
            border-color: var(--accent-red);
            background: rgba(255, 0, 60, 0.05);
        }

        .upload-box h4 { margin-bottom: 5px; color: var(--accent-red); font-size: 0.9rem; }
        .upload-box p { font-size: 0.7rem; color: #666; }

        /* Modal Base */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 20000;
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
        }

        .modal-box {
            text-align: center;
            border: 2px solid var(--accent-red);
            padding: 40px 20px;
            background: #000;
            max-width: 500px;
            width: 100%;
            animation: glitch-anim 0.3s infinite;
            position: relative;
        }

        /* Login Specific */
        .login-box {
            animation: none;
            border: 2px solid var(--accent-red);
            background: linear-gradient(135deg, #050505 0%, #1a0505 100%);
            box-shadow: 0 0 50px rgba(255,0,60,0.2);
        }

        /* --- 10. MAIN SITE ENTRY ANIMATION --- */
        #main-site {
            opacity: 0;
            filter: blur(20px);
            transform: scale(1.05);
            transition: all 1.5s var(--ease-cinematic);
        }
        #main-site.loaded {
            opacity: 1;
            filter: blur(0px);
            transform: scale(1);
        }

        /* --- 11. FULL SCREEN ADMIN PANEL --- */
        #admin-portal {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: #050505;
            z-index: 30000;
            display: none;
            overflow-y: auto;
            color: #fff;
        }

        .admin-nav {
            background: #0a0a0a;
            border-bottom: 2px solid var(--accent-red);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky; top: 0; z-index: 10;
            flex-wrap: wrap;
            gap: 10px;
        }

        .admin-content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .admin-grid {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 30px;
        }

        .admin-sidebar {
            background: #0a0a0a;
            border: 1px solid #333;
            padding: 20px;
            height: fit-content;
        }

        .admin-menu-item {
            display: block;
            padding: 15px;
            color: #888;
            text-decoration: none;
            border-left: 3px solid transparent;
            transition: 0.3s;
            cursor: pointer;
            margin-bottom: 5px;
            font-family: var(--font-display);
        }

        .admin-menu-item:hover, .admin-menu-item.active {
            background: rgba(255,0,60,0.1);
            color: #fff;
            border-left-color: var(--accent-red);
        }

        .admin-panel-section {
            display: none;
        }
        .admin-panel-section.active { display: block; }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: #0a0a0a;
            min-width: 600px; /* Ensure table doesn't squish */
        }

        .data-table th, .data-table td {
            padding: 12px;
            border: 1px solid #333;
            text-align: left;
            font-size: 0.9rem;
        }

        .data-table th { background: #111; color: var(--accent-red); font-family: var(--font-display); }
        .data-table tr:hover { background: #111; }

        .action-btn {
            padding: 5px 10px;
            font-size: 0.8rem;
            cursor: pointer;
            background: #222;
            border: 1px solid #444;
            color: #fff;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        .action-btn:hover { background: var(--accent-red); border-color: var(--accent-red); }
        .btn-delete:hover { background: red; border-color: red; }

        /* Request Details Box */
        .req-details-box {
            background: #111;
            border: 1px solid #333;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .proof-img {
            max-width: 100px;
            border: 1px solid #444;
            cursor: pointer;
            transition: 0.3s;
        }
        .proof-img:hover { transform: scale(2); border-color: #fff; z-index: 10; position: relative; }

        /* --- FOOTER --- */
        footer {
            border-top: 1px solid #222;
            padding: 40px 20px;
            background: #000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .footer-logo {
            width: 40px;
            height: auto;
            vertical-align: middle;
            margin-right: 15px;
        }

        .credit-link {
            color: var(--accent-red);
            text-decoration: none;
            font-weight: bold;
            transition: 0.3s;
        }
        .credit-link:hover {
            text-shadow: 0 0 10px var(--accent-red);
            color: #fff;
        }

        /* Animation Classes */
        .fade-up { opacity: 0; transform: translateY(50px); transition: 0.8s var(--ease-snap); }
        .fade-up.active { opacity: 1; transform: translateY(0); }

        /* ================= MEDIA QUERIES (RESPONSIVENESS) ================= */

        /* LARGE SCREENS / TV (1920px +) */
        @media (min-width: 1920px) {
            html { font-size: 20px; }
            .container { max-width: 1800px; }
            .hero-logo-main { width: 200px; }
        }

        /* TABLET & MOBILE (Max Width 1024px) */
        @media (max-width: 1024px) {
            .section-padding { padding: 60px 0; }
            .hero { padding-top: 80px; }
            .admin-grid { grid-template-columns: 200px 1fr; gap: 20px; }
        }

        /* MOBILE (Max Width 768px) */
        @media (max-width: 768px) {
            /* General Layout */
            .container { padding: 0 15px; }
            .input-row, .file-upload-row { grid-template-columns: 1fr; gap: 15px; }
            
            /* Typography */
            h1 { line-height: 1; }
            .loader-text-cinematic { font-size: 2rem; letter-spacing: 5px; }
            
            /* Hero */
            .hero-logo-main { width: 100px; }
            .hero-actions { flex-direction: column; width: 100%; }
            .hero-actions .btn { width: 100%; text-align: center; }
            .hero-stats { gap: 20px; justify-content: space-between; }
            .stat-item { width: 45%; }

            /* Pricing */
            .price-grid { grid-template-columns: 1fr; }

            /* Terminal/Slots */
            .terminal-header { flex-direction: column; align-items: flex-start; gap: 15px; }
            .lobby-tabs { width: 100%; justify-content: flex-start; }
            .lobby-btn { flex: 1; text-align: center; }
            .slot-grid { grid-template-columns: repeat(2, 1fr); }

            /* Admin Panel Mobile */
            .admin-nav { flex-direction: column; align-items: flex-start; }
            .admin-nav div { margin-top: 10px; width: 100%; display: flex; gap: 10px; }
            .admin-nav .btn { flex: 1; padding: 10px; }
            .admin-grid { grid-template-columns: 1fr; }
            .admin-sidebar { width: 100%; margin-bottom: 20px; display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; }
            .admin-menu-item { white-space: nowrap; border-left: none; border-bottom: 3px solid transparent; flex: 1; text-align: center; }
            .admin-menu-item.active { border-left: none; border-bottom-color: var(--accent-red); }
            
            /* Pending Request Mobile Layout */
            .req-details-box > div { flex-direction: column; }
            .req-details-box > div > div:last-child { margin-left: 0; margin-top: 20px; width: 100%; flex-direction: row; }
            .req-details-box button { flex: 1; }
        }

        /* SMALL MOBILE (Max Width 480px) */
        @media (max-width: 480px) {
            .slot-grid { grid-template-columns: 1fr; }
            .loader-logo-img { width: 80px; }
            .modal-box { padding: 30px 15px; }
        }

    </style>
</head>
<body>

    <!-- CANVAS BACKGROUND -->
    <canvas id="bg-canvas"></canvas>
    <div class="noise-overlay"></div>

    <!-- CINEMATIC PRELOADER -->
    <div id="preloader">
        <div class="loader-bg-glow"></div>
        <div class="loader-scanline"></div>
        <div class="loader-content-wrapper">
            <img src="https://i.postimg.cc/pXmdTKn1/Whats-App-Image-2026-01-03-at-10-46-03-AM.jpg" alt="Enma Logo" class="loader-logo-img">
            <div class="loader-text-cinematic">ENMA E-SPORTS</div>
            <div class="loader-subtext">PIXCELYASH PRESENTS</div>
        </div>
    </div>

    <!-- CONFIRMATION OVERLAY -->
    <div id="confirmation-overlay" class="modal-overlay">
        <div class="modal-box confirmation-box">
            <i class="fa-solid fa-check-circle" style="font-size: 3rem; color: lime; margin-bottom: 20px;"></i>
            <h2 style="color: #fff;">SUBMISSION SUCCESSFUL</h2>
            <p style="color: #888; margin-top: 10px;">DETAILS SENT TO ADMIN PANEL FOR VERIFICATION.</p>
            <p style="color: var(--accent-red); margin-top: 5px;">PLEASE WAIT FOR APPROVAL.</p>
            <button class="btn" style="margin-top: 20px;" onclick="closeConfirmation()">CLOSE</button>
        </div>
    </div>

    <!-- LOGIN MODAL -->
    <div id="login-modal" class="modal-overlay">
        <div class="modal-box login-box">
            <h2 class="glitch" data-text="SYSTEM LOCKED" style="margin-bottom: 10px;">SYSTEM LOCKED</h2>
            <p style="color: var(--accent-red); margin-bottom: 20px; letter-spacing: 2px;">SECURE TERMINAL ACCESS</p>
            <div style="position: relative; max-width: 300px; margin: 0 auto;">
                <input type="password" id="admin-pass-input" class="cyber-input" placeholder="ENTER ACCESS CODE" style="text-align: center; letter-spacing: 5px; font-size: 1.2rem;">
            </div>
            <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
                <button class="btn" onclick="submitAdminLogin()">AUTHENTICATE</button>
                <button class="btn btn-secondary" onclick="closeAdminLogin()">ABORT</button>
            </div>
            <div id="login-error" style="color: red; margin-top: 15px; font-family: var(--font-tech); height: 20px;"></div>
        </div>
    </div>

    <!-- MAIN SITE -->
    <div id="main-site">
        
        <!-- HERO -->
        <section class="hero">
            <div class="container hero-content">
                <div class="fade-up">
                    <img src="https://i.postimg.cc/pXmdTKn1/Whats-App-Image-2026-01-03-at-10-46-03-AM.jpg" alt="Enma Logo" class="hero-logo-main">
                    
                    <div style="color:var(--accent-red); letter-spacing:4px; font-weight:700; margin-bottom:10px;">// COMPETITIVE PROTOCOL</div>
                    <h1 class="glitch" data-text="ENMA E-SPORTS">ENMA<br>E-SPORTS</h1>
                    <p class="hero-sub">High-stakes scrims for elite squads. Verify your skills, claim the bounty, and rise through the ranks.</p>
                    
                    <div class="hero-actions">
                        <a href="#registration" class="btn">SECURE SLOT</a>
                        <a href="#slots" class="btn btn-secondary">VIEW INTEL</a>
                    </div>

                    <div class="hero-stats">
                        <div class="stat-item">
                            <h3>₹50K+</h3>
                            <p>MONTHLY POOL</p>
                        </div>
                        <div class="stat-item">
                            <h3>24/7</h3>
                            <p>LIVE SUPPORT</p>
                        </div>
                        <div class="stat-item">
                            <h3>TIER 1</h3>
                            <p>LOBBY QUALITY</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SCHEDULE STRIP -->
        <div class="schedule-strip">
            <div class="marquee-content">
                12:00 PM // SECTOR A &nbsp;&bull;&nbsp; 03:00 PM // SECTOR B &nbsp;&bull;&nbsp; 06:00 PM // SECTOR C &nbsp;&bull;&nbsp; 09:00 PM // PRIME OP &nbsp;&bull;&nbsp; 
                12:00 PM // SECTOR A &nbsp;&bull;&nbsp; 03:00 PM // SECTOR B &nbsp;&bull;&nbsp; 06:00 PM // SECTOR C &nbsp;&bull;&nbsp; 09:00 PM // PRIME OP &nbsp;&bull;&nbsp;
            </div>
        </div>

        <!-- PRICING -->
        <section id="pricing" class="section-padding pricing-section">
            <div class="container">
                <div class="title-wrapper fade-up">
                    <span>AVAILABLE CONTRACTS</span>
                    <h2>SELECT BOUNTY</h2>
                </div>

                <div class="price-grid">
                    <!-- Card 1 -->
                    <div class="contract-card fade-up">
                        <div class="contract-title">ROOKIE</div>
                        <div class="contract-price">₹25</div>
                        <ul class="contract-details">
                            <li><span>POOL</span><strong>₹220</strong></li>
                            <li><span>MATCHES</span><strong>06</strong></li>
                            <li><span>MAP</span><strong>ERANGEL</strong></li>
                        </ul>
                        <button class="btn" style="width:100%; margin-top:20px;" onclick="startRegistration('ROOKIE')">ACCEPT</button>
                    </div>

                    <!-- Card 2 -->
                    <div class="contract-card fade-up">
                        <div class="contract-title">ELITE</div>
                        <div class="contract-price">₹35</div>
                        <ul class="contract-details">
                            <li><span>POOL</span><strong>₹320</strong></li>
                            <li><span>MATCHES</span><strong>06</strong></li>
                            <li><span>MAP</span><strong>ALL MAPS</strong></li>
                        </ul>
                        <button class="btn" style="width:100%; margin-top:20px;" onclick="startRegistration('ELITE')">ACCEPT</button>
                    </div>

                    <!-- Card 3 -->
                    <div class="contract-card featured fade-up">
                        <div class="contract-title">PRO LEAGUE</div>
                        <div class="contract-price" style="color:var(--accent-red)">₹45</div>
                        <ul class="contract-details">
                            <li><span>POOL</span><strong>₹380</strong></li>
                            <li><span>MATCHES</span><strong>06</strong></li>
                            <li><span>STREAM</span><strong>LIVE CAST</strong></li>
                        </ul>
                        <button class="btn" style="width:100%; margin-top:20px; border-color:var(--accent-red); color:var(--accent-red);" onclick="startRegistration('PRO')">ACCEPT</button>
                    </div>

                    <!-- Card 4 -->
                    <div class="contract-card featured fade-up">
                        <div class="contract-title">ULTIMATE</div>
                        <div class="contract-price" style="color:var(--accent-red)">₹55</div>
                        <ul class="contract-details">
                            <li><span>POOL</span><strong>₹480</strong></li>
                            <li><span>MATCHES</span><strong>06</strong></li>
                            <li><span>PERKS</span><strong>MVP AWARD</strong></li>
                        </ul>
                        <button class="btn" style="width:100%; margin-top:20px; border-color:var(--accent-red); color:var(--accent-red);" onclick="startRegistration('ULTIMATE')">ACCEPT</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLOTS (TERMINAL) -->
        <section id="slots" class="section-padding">
            <div class="container">
                <div class="title-wrapper fade-up">
                    <span>LOBBY STATUS</span>
                    <h2>SLOT REGISTRY</h2>
                </div>

                <div class="terminal-container fade-up">
                    <div class="terminal-header">
                        <div style="display:flex; flex-direction:column;">
                            <span>// CONNECTION: SECURE</span>
                            <span id="active-lobby-name" style="color:var(--accent-red); font-weight:bold;">// TARGET: ROOKIE LOBBY</span>
                        </div>
                        <!-- Lobby Tabs -->
                        <div class="lobby-tabs">
                            <button class="lobby-btn active" onclick="viewLobby('ROOKIE')" id="btn-rookie">ROOKIE</button>
                            <button class="lobby-btn" onclick="viewLobby('ELITE')" id="btn-elite">ELITE</button>
                            <button class="lobby-btn" onclick="viewLobby('PRO')" id="btn-pro">PRO</button>
                            <button class="lobby-btn" onclick="viewLobby('ULTIMATE')" id="btn-ultimate">ULTIMATE</button>
                        </div>
                    </div>
                    <div class="slot-grid" id="slot-grid">
                        <!-- JS Injection -->
                    </div>
                </div>
            </div>
        </section>

        <!-- REGISTRATION & UPLOAD -->
        <section id="registration" class="section-padding upload-section">
            <div class="container">
                <div class="title-wrapper fade-up">
                    <span>JOIN THE LOBBY</span>
                    <h2>REGISTRATION PORTAL</h2>
                </div>

                <!-- Tabs -->
                <div class="reg-tabs fade-up">
                    <button id="tab-squad" class="tab-btn active" onclick="switchRegMode('squad')">SQUAD ENTRY</button>
                    <button id="tab-solo" class="tab-btn" onclick="switchRegMode('solo')">SOLO ENTRY</button>
                </div>

                <!-- Forms Container -->
                <div class="reg-container fade-up">
                    
                    <!-- Squad Form -->
                    <div id="form-squad" class="reg-form">
                        <!-- TIER SELECTION -->
                        <select class="cyber-select" id="reg-tier" onchange="updateQR()">
                            <option value="ROOKIE" data-price="25">SELECT TIER: ROOKIE (₹25)</option>
                            <option value="ELITE" data-price="35">SELECT TIER: ELITE (₹35)</option>
                            <option value="PRO" data-price="45">SELECT TIER: PRO LEAGUE (₹45)</option>
                            <option value="ULTIMATE" data-price="55">SELECT TIER: ULTIMATE (₹55)</option>
                        </select>

                        <div class="input-row">
                            <input type="text" class="cyber-input" placeholder="TEAM NAME" id="sq-team">
                            <input type="text" class="cyber-input" placeholder="WHATSAPP NO." id="sq-whatsapp">
                        </div>
                        <div class="input-row">
                            <input type="text" class="cyber-input" placeholder="CAPTAIN IGN" id="sq-p1">
                            <input type="text" class="cyber-input" placeholder="PLAYER 2 IGN" id="sq-p2">
                        </div>
                        <div class="input-row">
                            <input type="text" class="cyber-input" placeholder="PLAYER 3 IGN" id="sq-p3">
                            <input type="text" class="cyber-input" placeholder="PLAYER 4 IGN (OPTIONAL)" id="sq-p4">
                        </div>
                    </div>

                    <!-- Solo Form -->
                    <div id="form-solo" class="reg-form" style="display:none;">
                         <select class="cyber-select" id="reg-tier-solo" onchange="updateQR()">
                            <option value="ROOKIE" data-price="25">SELECT TIER: ROOKIE (₹25)</option>
                            <option value="ELITE" data-price="35">SELECT TIER: ELITE (₹35)</option>
                            <option value="PRO" data-price="45">SELECT TIER: PRO LEAGUE (₹45)</option>
                            <option value="ULTIMATE" data-price="55">SELECT TIER: ULTIMATE (₹55)</option>
                        </select>

                        <div class="input-row">
                            <input type="text" class="cyber-input" placeholder="IN-GAME NAME (IGN)" id="sl-ign">
                            <input type="text" class="cyber-input" placeholder="CHARACTER ID" id="sl-id">
                        </div>
                        <div class="input-row">
                            <input type="text" class="cyber-input" placeholder="WHATSAPP NO." id="sl-whatsapp">
                            <input type="email" class="cyber-input" placeholder="EMAIL ADDRESS (OPTIONAL)" id="sl-email">
                        </div>
                    </div>

                    <!-- Payment & Proof Section -->
                    <div class="upload-wrapper" style="margin-top: 50px; border-top: 1px solid #333; padding-top: 30px;">
                        <h3 style="text-align:center; margin-bottom: 20px;">PAYMENT TERMINAL</h3>
                        
                        <!-- QR Code -->
                        <div class="qr-section">
                            <img id="dynamic-qr" src="" alt="Payment QR" style="width:100%;">
                        </div>
                        <p style="text-align:center; color:#888; margin-bottom:30px;">SCAN TO PAY VIA UPI</p>

                        <!-- File Uploads -->
                        <div class="file-upload-row">
                            <!-- Youtube Sub Proof -->
                            <div class="upload-box" id="box-yt">
                                <i class="fa-brands fa-youtube" style="font-size: 2rem; color: red; margin-bottom: 10px;"></i>
                                <h4>YOUTUBE SUB PROOF</h4>
                                <p>(REQUIRED)</p>
                                <input type="file" id="file-yt" hidden onchange="handleFileSelect(this, 'box-yt')">
                                <label for="file-yt" style="position:absolute; top:0; left:0; width:100%; height:100%; cursor:pointer;"></label>
                            </div>

                            <!-- Payment SS -->
                            <div class="upload-box" id="box-pay">
                                <i class="fa-solid fa-receipt" style="font-size: 2rem; color: var(--accent-red); margin-bottom: 10px;"></i>
                                <h4>PAYMENT SCREENSHOT</h4>
                                <p>(REQUIRED)</p>
                                <input type="file" id="file-pay" hidden onchange="handleFileSelect(this, 'box-pay')">
                                <label for="file-pay" style="position:absolute; top:0; left:0; width:100%; height:100%; cursor:pointer;"></label>
                            </div>
                        </div>
                    </div>

                    <button class="btn" style="width:100%; margin-top: 30px;" onclick="submitRegistration()">COMPLETE REGISTRATION</button>
                    <div id="upload-msg" style="margin-top:20px; text-align:center; font-weight:700; color:var(--accent-red);"></div>

                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <footer>
            <div class="container" style="display:flex; justify-content:space-between; width:100%; align-items: center;">
                <div style="display:flex; align-items:center;">
                    <img src="https://i.postimg.cc/pXmdTKn1/Whats-App-Image-2026-01-03-at-10-46-03-AM.jpg" alt="Enma Logo" class="footer-logo">
                    <div>
                        <h2 style="font-size:1.5rem; margin-bottom:0px; line-height:1;">ENMA</h2>
                        <p style="color:#555; font-size:0.8rem; margin-top:5px;">
                            DESIGN BY <a href="https://pixcelyash.space" target="_blank" class="credit-link">PIXCELYASH.SPACE</a>
                        </p>
                    </div>
                </div>
                <div>
                    <span style="margin-left:20px; color:#333; cursor:pointer;" onclick="toggleAdminPanel()">[ADMIN ACCESS]</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- FULL SCREEN ADMIN PORTAL -->
    <div id="admin-portal">
        <div class="admin-nav">
            <h2 style="margin:0; font-size:1.5rem; color:var(--accent-red);">ENMA // ADMIN CONSOLE</h2>
            <div>
                <button class="btn btn-secondary" onclick="exportData()" style="padding:10px 20px; margin-right:10px;">EXPORT CSV</button>
                <button class="btn" onclick="toggleAdminPanel()" style="padding:10px 20px;">EXIT CONSOLE</button>
            </div>
        </div>

        <div class="admin-content">
            <div class="admin-grid">
                <!-- Sidebar -->
                <div class="admin-sidebar">
                    <div class="admin-menu-item active" onclick="switchAdminTab('slots')">MANAGE SLOTS</div>
                    <div class="admin-menu-item" onclick="switchAdminTab('pending')">PENDING REQUESTS <span id="pending-count" style="background:red; color:#fff; padding:2px 6px; font-size:0.7rem; border-radius:50%;">0</span></div>
                </div>

                <!-- Slot Management Tab -->
                <div id="admin-tab-slots" class="admin-panel-section active">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                        <h3>LIVE SLOT MANAGEMENT</h3>
                        <select id="admin-lobby-selector" class="cyber-select" style="width:200px; margin:0;" onchange="renderAdminSlots()">
                            <option value="ROOKIE">ROOKIE LOBBY</option>
                            <option value="ELITE">ELITE LOBBY</option>
                            <option value="PRO">PRO LOBBY</option>
                            <option value="ULTIMATE">ULTIMATE LOBBY</option>
                        </select>
                    </div>
                    
                    <div style="overflow-x:auto;">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>TEAM NAME</th>
                                    <th>STATUS</th>
                                    <th>ACTIONS</th>
                                </tr>
                            </thead>
                            <tbody id="admin-slot-body">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Pending Requests Tab -->
                <div id="admin-tab-pending" class="admin-panel-section">
                    <h3>INCOMING REGISTRATIONS</h3>
                    <div id="admin-pending-list" style="display:grid; gap:15px;">
                        <!-- Populated by JS -->
                        <div style="color:#666; padding:20px; border:1px dashed #333;">NO PENDING TRANSMISSIONS DETECTED.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* --- DIGITAL RAIN --- */
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const katakana = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const characters = katakana.split('');
        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = [];
        for(let i=0; i<columns; i++) drops[i] = 1;
        function drawRain() {
            ctx.fillStyle = 'rgba(5, 5, 5, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#ff003c';
            ctx.font = fontSize + 'px monospace';
            for(let i=0; i<drops.length; i++) {
                const text = characters[Math.floor(Math.random()*characters.length)];
                ctx.fillText(text, i*fontSize, drops[i]*fontSize);
                if(drops[i]*fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }
        setInterval(drawRain, 33);

        /* --- CINEMATIC PRELOADER LOGIC --- */
        window.onload = () => {
            const preloader = document.getElementById('preloader');
            const main = document.getElementById('main-site');
            const content = document.querySelector('.loader-content-wrapper');
            
            updateQR();

            setTimeout(() => {
                content.classList.add('blur-out-anim');
                setTimeout(() => {
                    preloader.classList.add('fade-out-anim');
                    setTimeout(() => {
                        preloader.style.display = 'none';
                        main.classList.add('loaded');
                    }, 800);
                }, 800);
            }, 3500); 
        };

        /* --- DATA MANAGEMENT --- */
        const slotGrid = document.getElementById('slot-grid');
        let lobbyData = { 'ROOKIE': [], 'ELITE': [], 'PRO': [], 'ULTIMATE': [] };
        let currentViewLobby = 'ROOKIE';
        let pendingRequests = [];

        function initSlots() {
            const tiers = ['ROOKIE', 'ELITE', 'PRO', 'ULTIMATE'];
            tiers.forEach(tier => {
                for(let i=1; i<=12; i++) {
                    const filled = Math.random() > 0.6; 
                    lobbyData[tier].push({ id: i, name: filled ? `TEAM ${getRandomName()}` : '', status: filled });
                }
            });
            renderSlots('ROOKIE');
        }

        function getRandomName() {
            const n = ['XERO','OBLIVION','RAVEN','ONYX','FLUX','APEX','TITAN','VOID', 'SPECTRE', 'NEON'];
            return n[Math.floor(Math.random()*n.length)];
        }

        function viewLobby(tier) {
            currentViewLobby = tier;
            document.querySelectorAll('.lobby-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${tier.toLowerCase()}`).classList.add('active');
            document.getElementById('active-lobby-name').innerText = `// TARGET: ${tier} LOBBY`;
            renderSlots(tier);
        }

        function renderSlots(tier) {
            slotGrid.innerHTML = '';
            const slots = lobbyData[tier];
            slots.forEach(s => {
                const div = document.createElement('div');
                div.className = `slot-item ${s.status ? 'filled' : 'open'}`;
                div.innerHTML = `
                    <div class="slot-id">SLOT_0${s.id<10?'0'+s.id:s.id}</div>
                    <div class="slot-name">${s.status ? s.name : '// OPEN'}</div>
                `;
                slotGrid.appendChild(div);
            });
        }
        initSlots();

        /* --- REGISTRATION LOGIC --- */
        let currentMode = 'squad';

        function startRegistration(tier) {
            document.getElementById('registration').scrollIntoView();
            const dropdown = document.getElementById(currentMode === 'squad' ? 'reg-tier' : 'reg-tier-solo');
            dropdown.value = tier;
            updateQR(); 
        }

        function switchRegMode(mode) {
            currentMode = mode;
            document.getElementById('form-squad').style.display = mode === 'squad' ? 'block' : 'none';
            document.getElementById('form-solo').style.display = mode === 'squad' ? 'none' : 'block';
            document.getElementById('tab-squad').className = mode === 'squad' ? 'tab-btn active' : 'tab-btn';
            document.getElementById('tab-solo').className = mode === 'squad' ? 'tab-btn' : 'tab-btn active';
            updateQR();
        }

        function updateQR() {
            let selectId = currentMode === 'squad' ? 'reg-tier' : 'reg-tier-solo';
            let select = document.getElementById(selectId);
            let price = select.options[select.selectedIndex].getAttribute('data-price');
            let upiLink = `upi://pay?pa=pixcelyash@upi&pn=ENMA%20Esports&am=${price}&tn=TournamentFee`;
            let qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(upiLink)}`;
            document.getElementById('dynamic-qr').src = qrUrl;
        }

        function handleFileSelect(input, boxId) {
            const box = document.getElementById(boxId);
            if (input.files && input.files[0]) {
                box.style.borderColor = '#00ff00';
                box.style.background = 'rgba(0, 255, 0, 0.05)';
                box.querySelector('h4').innerText = 'FILE UPLOADED';
                box.querySelector('p').innerText = input.files[0].name;
            }
        }

        // Helper to read file as DataURL
        const readFileAsDataURL = (file) => {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        };

        function submitRegistration() {
            let isValid = true;
            let data = {};
            const msg = document.getElementById('upload-msg');
            
            let selectedTier = '';
            if (currentMode === 'squad') {
                selectedTier = document.getElementById('reg-tier').value;
                data.team = document.getElementById('sq-team').value;
                data.whatsapp = document.getElementById('sq-whatsapp').value;
                data.p1 = document.getElementById('sq-p1').value;
                data.p2 = document.getElementById('sq-p2').value;
                data.p3 = document.getElementById('sq-p3').value;
                data.p4 = document.getElementById('sq-p4').value;
                
                if (!data.team || !data.whatsapp) isValid = false;
            } else {
                selectedTier = document.getElementById('reg-tier-solo').value;
                data.ign = document.getElementById('sl-ign').value;
                data.whatsapp = document.getElementById('sl-whatsapp').value;
                data.id = document.getElementById('sl-id').value;
                if (!data.ign || !data.whatsapp) isValid = false;
            }

            const file1 = document.getElementById('file-yt').files[0];
            const file2 = document.getElementById('file-pay').files[0];

            if (!isValid) {
                msg.innerText = '// ERROR: FILL REQUIRED FIELDS';
                return;
            }
            if (!file1 || !file2) {
                msg.innerText = '// ERROR: UPLOAD BOTH PROOFS';
                return;
            }

            msg.innerText = 'ENCRYPTING & TRANSMITTING...';
            
            // Read images
            Promise.all([readFileAsDataURL(file1), readFileAsDataURL(file2)])
                .then(([ytImg, payImg]) => {
                    const regName = currentMode === 'squad' ? data.team : data.ign;
                    
                    const newReq = { 
                        name: regName, 
                        mode: currentMode, 
                        tier: selectedTier, 
                        whatsapp: data.whatsapp,
                        details: data,
                        proofYt: ytImg,
                        proofPay: payImg,
                        timestamp: new Date().toLocaleTimeString()
                    };

                    pendingRequests.push(newReq);
                    updatePendingCount();
                    renderAdminPending(); // Refresh admin view if open

                    // Show Confirmation
                    setTimeout(() => {
                        document.getElementById('confirmation-overlay').style.display = 'flex';
                    }, 1000);
                })
                .catch(err => {
                    console.error("File Read Error:", err);
                    msg.innerText = '// ERROR: FILE PROCESSING FAILED';
                });
        }

        function closeConfirmation() {
            document.getElementById('confirmation-overlay').style.display = 'none';
            document.getElementById('upload-msg').innerText = '';
            // Reset Form here if needed
        }

        /* --- ADMIN DASHBOARD LOGIC --- */
        function toggleAdminPanel() {
            const p = document.getElementById('admin-portal');
            const loginModal = document.getElementById('login-modal');
            const isVisible = p.style.display === 'block';
            
            if (isVisible) {
                p.style.display = 'none';
                document.body.style.overflow = 'auto';
            } else {
                loginModal.style.display = 'flex';
            }
        }

        function submitAdminLogin() {
            const input = document.getElementById('admin-pass-input');
            const error = document.getElementById('login-error');
            const loginModal = document.getElementById('login-modal');
            const p = document.getElementById('admin-portal');

            if (input.value === "PIXCELYASH.SPACE") {
                loginModal.style.display = 'none';
                p.style.display = 'block';
                document.body.style.overflow = 'hidden';
                input.value = ''; 
                error.innerText = '';
                renderAdminSlots();
                renderAdminPending();
            } else {
                error.innerText = 'ACCESS DENIED: INVALID CODE';
                input.value = '';
            }
        }

        function closeAdminLogin() {
            document.getElementById('login-modal').style.display = 'none';
            document.getElementById('login-error').innerText = '';
            document.getElementById('admin-pass-input').value = '';
        }

        function switchAdminTab(tabName) {
            document.querySelectorAll('.admin-panel-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.admin-menu-item').forEach(el => el.classList.remove('active'));
            
            document.getElementById(`admin-tab-${tabName}`).classList.add('active');
            if(tabName === 'slots') document.querySelector('.admin-menu-item:nth-child(1)').classList.add('active');
            if(tabName === 'pending') document.querySelector('.admin-menu-item:nth-child(2)').classList.add('active');
        }

        function renderAdminSlots() {
            const tier = document.getElementById('admin-lobby-selector').value;
            const tbody = document.getElementById('admin-slot-body');
            tbody.innerHTML = '';
            
            lobbyData[tier].forEach((slot, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td style="color:#888;">#${slot.id}</td>
                    <td>
                        <input type="text" value="${slot.status ? slot.name : ''}" 
                            id="edit-name-${tier}-${index}" 
                            style="background:transparent; border:none; color:#fff; width:100%; font-family:var(--font-tech);"
                            placeholder="// EMPTY">
                    </td>
                    <td>
                        <span style="color:${slot.status ? 'red' : 'lime'}; font-weight:bold;">
                            ${slot.status ? 'LOCKED' : 'OPEN'}
                        </span>
                    </td>
                    <td>
                        <button class="action-btn" onclick="saveSlot('${tier}', ${index})">SAVE</button>
                        <button class="action-btn btn-delete" onclick="clearSlot('${tier}', ${index})">CLEAR</button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function saveSlot(tier, index) {
            const inputVal = document.getElementById(`edit-name-${tier}-${index}`).value;
            if(inputVal.trim() !== "") {
                lobbyData[tier][index].name = inputVal;
                lobbyData[tier][index].status = true;
            } else {
                lobbyData[tier][index].name = "";
                lobbyData[tier][index].status = false;
            }
            renderAdminSlots();
            if(currentViewLobby === tier) renderSlots(tier); // Update public view
        }

        function clearSlot(tier, index) {
            if(confirm('CONFIRM DELETE: Wipe this slot data?')) {
                lobbyData[tier][index].name = "";
                lobbyData[tier][index].status = false;
                renderAdminSlots();
                if(currentViewLobby === tier) renderSlots(tier);
            }
        }

        function renderAdminPending() {
            const list = document.getElementById('admin-pending-list');
            if (pendingRequests.length === 0) {
                list.innerHTML = '<div style="color:#666; padding:20px; border:1px dashed #333;">NO PENDING TRANSMISSIONS DETECTED.</div>';
                return;
            }
            
            list.innerHTML = '';
            pendingRequests.forEach((req, index) => {
                const item = document.createElement('div');
                item.className = 'req-details-box';
                
                // Build details string based on mode
                let detailStr = '';
                if(req.mode === 'squad') {
                    detailStr = `
                        <div style="margin-bottom:10px; color:#aaa;">
                            <strong>Players:</strong> ${req.details.p1}, ${req.details.p2}, ${req.details.p3}, ${req.details.p4}
                        </div>
                    `;
                } else {
                    detailStr = `
                        <div style="margin-bottom:10px; color:#aaa;">
                            <strong>ID:</strong> ${req.details.id} | <strong>Email:</strong> ${req.details.email || 'N/A'}
                        </div>
                    `;
                }

                item.innerHTML = `
                    <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                        <div style="flex:1;">
                            <div style="color:var(--accent-red); font-weight:bold; font-size:0.9rem;">${req.tier} LOBBY // ${req.timestamp}</div>
                            <div style="color:#fff; font-size:1.5rem; font-weight:bold; margin:5px 0;">${req.name}</div>
                            <div style="color:#fff; margin-bottom:10px;">
                                <i class="fa-brands fa-whatsapp"></i> ${req.whatsapp} 
                                <span style="background:#333; padding:2px 6px; font-size:0.8rem; margin-left:10px;">${req.mode.toUpperCase()}</span>
                            </div>
                            
                            ${detailStr}

                            <div style="display:flex; gap:10px; margin-top:15px;">
                                <div>
                                    <div style="font-size:0.7rem; color:#666; margin-bottom:5px;">PAYMENT PROOF</div>
                                    <img src="${req.proofPay}" class="proof-img" onclick="window.open(this.src)">
                                </div>
                                <div>
                                    <div style="font-size:0.7rem; color:#666; margin-bottom:5px;">SUB PROOF</div>
                                    <img src="${req.proofYt}" class="proof-img" onclick="window.open(this.src)">
                                </div>
                            </div>
                        </div>

                        <div style="display:flex; flex-direction:column; gap:10px; margin-left:20px;">
                            <button class="action-btn" style="background:green; border-color:green; padding:15px;" onclick="approveRequest(${index})">APPROVE & ADD</button>
                            <button class="action-btn" style="background:red; border-color:red; padding:15px;" onclick="rejectRequest(${index})">REJECT</button>
                        </div>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        function updatePendingCount() {
            document.getElementById('pending-count').innerText = pendingRequests.length;
        }

        function approveRequest(index) {
            const req = pendingRequests[index];
            const targetTierSlots = lobbyData[req.tier];
            // Find first open slot
            const openSlotIndex = targetTierSlots.findIndex(s => !s.status);
            
            if (openSlotIndex !== -1) {
                targetTierSlots[openSlotIndex].name = req.name;
                targetTierSlots[openSlotIndex].status = true;
                
                // Update views
                if (currentViewLobby === req.tier) renderSlots(req.tier);
                
                pendingRequests.splice(index, 1);
                updatePendingCount();
                renderAdminPending();
                renderAdminSlots(); // if on slot tab
                
                alert(`SUCCESS: ${req.name} Assigned to ${req.tier} Slot ${openSlotIndex + 1}`);
            } else {
                alert(`ERROR: ${req.tier} Lobby is FULL. Clear a slot first.`);
            }
        }

        function rejectRequest(index) {
            if(confirm('Reject this registration request?')) {
                pendingRequests.splice(index, 1);
                updatePendingCount();
                renderAdminPending();
            }
        }

        function exportData() {
            console.log("Exporting Data:", lobbyData);
            alert("DATA EXPORT INITIATED: Check Console Log for JSON dump.");
        }

        const obs = new IntersectionObserver(entries => {
            entries.forEach(e => {
                if(e.isIntersecting) e.target.classList.add('active');
            });
        }, {threshold:0.1});
        document.querySelectorAll('.fade-up').forEach(e => obs.observe(e));
    </script>
</body>
</html>
